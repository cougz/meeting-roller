---
import '../styles/d20.css';
---

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>Meeting Presenter Roller</title>
</head>
<body>
  <main>
    <h1>ðŸŽ² <span>Who's Next?</span></h1>
    <p class="subtitle">Roll the d20 to select the next presenter</p>

    <div class="dice-container" id="diceContainer">
      <svg class="d20" id="dice" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="faceGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#fbbf24"/>
            <stop offset="100%" style="stop-color:#f59e0b"/>
          </linearGradient>
          <linearGradient id="faceGradientDark" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#f59e0b"/>
            <stop offset="100%" style="stop-color:#d97706"/>
          </linearGradient>
          <linearGradient id="faceGradientDarker" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#d97706"/>
            <stop offset="100%" style="stop-color:#b45309"/>
          </linearGradient>
          <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#000" flood-opacity="0.4"/>
          </filter>
        </defs>
        
        <!-- D20 Icosahedron-style shape -->
        <g filter="url(#shadow)">
          <!-- Top pyramid -->
          <polygon class="face top" points="100,10 40,75 100,95" fill="url(#faceGradient)" stroke="#b45309" stroke-width="1"/>
          <polygon class="face top" points="100,10 100,95 160,75" fill="url(#faceGradientDark)" stroke="#b45309" stroke-width="1"/>
          
          <!-- Middle band -->
          <polygon class="face mid" points="40,75 100,95 55,140" fill="url(#faceGradientDark)" stroke="#b45309" stroke-width="1"/>
          <polygon class="face mid" points="100,95 145,140 55,140" fill="url(#faceGradient)" stroke="#b45309" stroke-width="1"/>
          <polygon class="face mid" points="100,95 160,75 145,140" fill="url(#faceGradientDarker)" stroke="#b45309" stroke-width="1"/>
          
          <!-- Bottom pyramid -->
          <polygon class="face bottom" points="55,140 100,190 145,140" fill="url(#faceGradientDark)" stroke="#b45309" stroke-width="1"/>
        </g>
        
        <!-- Number display -->
        <text id="diceNumber" x="100" y="125" text-anchor="middle" font-size="42" font-weight="bold" fill="#1e293b" style="text-shadow: 0 1px 2px rgba(255,255,255,0.3);">?</text>
      </svg>
    </div>

    <button id="rollBtn">Roll the Dice!</button>

    <div class="result-message" id="resultMessage" style="display: none;">
      <p><span id="presenterName"></span> is up!</p>
    </div>
  </main>

  <script>
    const PRESENTERS = [
      "Alice Johnson",
      "Bob Smith", 
      "Charlie Davis",
      "Diana Chen",
      "Evan Williams",
      "Fiona Garcia",
      "George Miller",
      "Hannah Lee",
      "Ivan Petrov",
      "Julia Martinez",
      "Kevin Brown",
      "Laura Wilson",
      "Michael Taylor",
      "Nina Anderson",
      "Oscar Thomas",
      "Paula Jackson",
      "Quinn Harris",
      "Rachel Clark",
      "Sam Robinson",
      "Tina Wright"
    ];

    const diceContainer = document.getElementById('diceContainer');
    const diceNumber = document.getElementById('diceNumber');
    const rollBtn = document.getElementById('rollBtn');
    const resultMessage = document.getElementById('resultMessage');
    const presenterName = document.getElementById('presenterName');
    let rolling = false;

    rollBtn.addEventListener('click', () => {
      if (rolling) return;
      
      rolling = true;
      rollBtn.textContent = 'Rolling...';
      rollBtn.classList.add('disabled');
      diceContainer.classList.add('rolling');
      diceNumber.textContent = '?';
      resultMessage.style.display = 'none';

      // Rapidly change numbers during roll
      const rollInterval = setInterval(() => {
        diceNumber.textContent = Math.floor(Math.random() * 20) + 1;
      }, 100);

      setTimeout(() => {
        clearInterval(rollInterval);
        const result = Math.floor(Math.random() * 20) + 1;
        diceContainer.classList.remove('rolling');
        diceNumber.textContent = result;
        presenterName.textContent = PRESENTERS[result - 1];
        resultMessage.style.display = 'block';
        rollBtn.textContent = 'Roll the Dice!';
        rollBtn.classList.remove('disabled');
        rolling = false;
      }, 2000);
    });
  </script>
</body>
</html>
